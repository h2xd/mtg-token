var e=Object.assign;import{d as t,a as n,c as o,b as s,r as a,o as r,e as i,f as l,w as c,t as u,g as d,F as h,h as p,p as k,i as f,j as m,k as v,l as g,m as w}from"./vendor.3db1e518.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const o=new URL(e,location),s=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,a)=>{const r=new URL(e,o);if(self[t].moduleMap[r])return n(self[t].moduleMap[r]);const i=new Blob([`import * as m from '${r}';`,`${t}.moduleMap['${r}']=m;`],{type:"text/javascript"}),l=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(i),onerror(){a(new Error(`Failed to import: ${e}`)),s(l)},onload(){n(self[t].moduleMap[r]),s(l)}});document.head.appendChild(l)})),self[t].moduleMap={}}}("/assets/");const b=t({id:"life",state:()=>({remainingLife:20}),getters:{alive(){return this.remainingLife>0}},actions:{reset(){this.remainingLife=20},raise(e=1){this.remainingLife+=Math.abs(e)},reduce(e=1){this.remainingLife-=Math.abs(e),this.remainingLife<0&&(this.remainingLife=0)}}});var _,y;(y=_||(_={})).RED="red",y.BLUE="blue",y.GREEN="green",y.BLACK="black",y.WHITE="white";const S={power:1,toughness:1,isTapped:!1,hasSummoningSickness:!0,mana:[_.RED],attributes:[]};class C{constructor(t){this._summoningSickness=!0,this._options=e(e({},S),t),this._tapped=this._options.isTapped,this._summoningSickness=this._options.hasSummoningSickness,this.uuid=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))),this.reset()}get canAttack(){return!this._summoningSickness&&!this._tapped}get power(){return this._power}get toughness(){return this._toughness}get isTapped(){return this._tapped}get hasSummoningSickness(){return this._summoningSickness}attack(){this._summoningSickness||(this._tapped=!0)}clear(){this._summoningSickness=!1,this._tapped=!1}reset(){this._power=this._options.power,this._toughness=this._options.toughness}}const L=t({id:"board",state:()=>({token:[]}),getters:{hasToken(){return this.token.length>0},tokenThatCanAttack(){return this.token.filter((e=>e.canAttack))},attackPower(){return this.tokenThatCanAttack.reduce(((e,t)=>e+t.power),0)}},actions:{addToken(e){this.token=[...this.token,e]},removeToken(e){this.token=this.token.filter((t=>t!==e))},copyToken(e){this.token=[...this.token,new C({power:e.power,toughness:e.toughness})]},attackWithAll(){this.token.forEach((e=>e.attack()))},nextTurn(){this.token.forEach((e=>e.clear()))},reset(){this.token=[]}}}),T=t({id:"main",state:()=>({life:b(),board:L()}),getters:{alive(){return this.life.alive}},actions:{reset(){this.life.reset(),this.board.reset()},nextTurn(){this.board.nextTurn()}}});var I=n({props:{active:{type:Boolean,default:!1}}});const x={class:"container"},A={class:"base underlay"};I.render=function(e,t,n,i,l,c){return r(),o("div",x,[s("span",A,[a(e.$slots,"default")]),s("span",{class:["base","overlayed",e.active&&"active"]},[a(e.$slots,"default")],2)])};const B={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-corner-down-left"},j=s("polyline",{points:"9 10 4 15 9 20"},null,-1),M=s("path",{d:"M20 4v7a4 4 0 0 1-4 4H4"},null,-1);const O={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-moon"},$=s("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},null,-1);var E=n({name:"TokenCardDetail",components:{Icon:I,CornerDownLeftIcon:function(e,t){return r(),o("svg",B,[j,M])},MoonIcon:function(e,t){return r(),o("svg",O,[$])}},props:{token:Object,is:{type:String,default:"li"}}});const D=c("data-v-7a632aa5"),R=D(((e,t,n,a,c,h)=>{const p=d("CornerDownLeftIcon"),k=d("Icon"),f=d("MoonIcon");return e.token?(r(),o(i(e.is),{key:0,class:["card",e.token.isTapped&&"tapped"]},{default:D((()=>[s("div",null,u(e.token.power)+" / "+u(e.token.toughness),1),s("div",null,[s(k,{active:e.token.isTapped},{default:D((()=>[s(p)])),_:1},8,["active"]),s(k,{active:e.token.hasSummoningSickness},{default:D((()=>[s(f)])),_:1},8,["active"])])])),_:1},8,["class"])):l("",!0)}));E.render=R,E.__scopeId="data-v-7a632aa5";var P=n({name:"Board",components:{TokenCardDetail:E},props:{board:Object},setup:e=>({handleDeath:t=>e.board.removeToken(t),handleCopy:t=>e.board.copyToken(t)})});const H=c("data-v-776e1f79");k("data-v-776e1f79");const N={key:0,class:"board"};f();const U=H(((e,t,n,a,i,c)=>{const k=d("TokenCardDetail");return r(),o(h,null,[s("div",null,"AttackPower: "+u(e.board.attackPower),1),s("div",null,[e.board.hasToken?(r(),o("ol",N,[(r(!0),o(h,null,p(e.board.token,(t=>(r(),o(k,{is:"li",key:t.uuid,token:t,onDeath:e.handleDeath,onCopy:e.handleCopy},null,8,["token","onDeath","onCopy"])))),128))])):l("",!0)])],64)}));P.render=U,P.__scopeId="data-v-776e1f79";const F={},W=c("data-v-5fb6ff72");k("data-v-5fb6ff72");const z={class:"button"};f();const G=W(((e,t)=>(r(),o("button",z,[a(e.$slots,"default")]))));var J;F.render=G,F.__scopeId="data-v-5fb6ff72",(J||(J={})).FLYING="flying";const Y={name:"Angel",slug:"angel",isFavorite:!1,tokenOptions:e(e({},S),{power:4,toughness:4,mana:[_.WHITE],attributes:[J.FLYING]})},K={name:"Soldier",slug:"soldier",isFavorite:!1,tokenOptions:e(e({},S),{power:1,toughness:1,mana:[_.WHITE]})};var V=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",AngelLibraryItem:Y,SoldierLibraryItem:K});const q=t({id:"library",state:()=>({active:!1,entries:[...Object.values(V)]}),getters:{isActive(){return this.active}},actions:{setActive(){this.active=!0},setInactive(){this.active=!1},toggleActive(){this.active=!this.active}}});const Q={},X=c("data-v-8e6e9150");k("data-v-8e6e9150");const Z={class:"headline"},ee={class:"text"};f();const te=X(((e,t)=>(r(),o("div",Z,[a(e.$slots,"icon"),s("h3",ee,[a(e.$slots,"default")])]))));Q.render=te,Q.__scopeId="data-v-8e6e9150";const ne={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-book"},oe=s("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},null,-1),se=s("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},null,-1);var ae=n({name:"Board",components:{BookIcon:function(e,t){return r(),o("svg",ne,[oe,se])},Button:F,Headline:Q},setup:()=>({Library:q()})});const re=c("data-v-f6b1ecd8");k("data-v-f6b1ecd8");const ie=m(" Library "),le=m("Summon");f();const ce=re(((e,t,n,a,i,l)=>{const c=d("BookIcon"),k=d("Headline"),f=d("Button");return r(),o("div",{class:["library",e.Library.isActive&&"active"]},[s(k,null,{icon:re((()=>[s(c)])),default:re((()=>[ie])),_:1}),(r(!0),o(h,null,p(e.Library.entries,(t=>(r(),o("ul",{key:t.slug},[s("li",null,[s("div",null,u(t.name),1),s("div",null,u(t.tokenOptions.power)+"P / "+u(t.tokenOptions.toughness)+"T",1),s(f,{onClick:n=>e.$emit("summon",t)},{default:re((()=>[le])),_:2},1032,["onClick"])])])))),128))],2)}));ae.render=ce,ae.__scopeId="data-v-f6b1ecd8";const ue={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-plus"},de=s("line",{x1:"12",y1:"5",x2:"12",y2:"19"},null,-1),he=s("line",{x1:"5",y1:"12",x2:"19",y2:"12"},null,-1);const pe={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-minus"},ke=s("line",{x1:"5",y1:"12",x2:"19",y2:"12"},null,-1);var fe=n({name:"LifePointsCounter",components:{PlusIcon:function(e,t){return r(),o("svg",ue,[de,he])},MinusIcon:function(e,t){return r(),o("svg",pe,[ke])}},props:{life:Object}});const me=c("data-v-ca6e6eca");k("data-v-ca6e6eca");const ve={class:"container"},ge={class:"counter"};f();const we=me(((e,t,n,a,i,l)=>{const c=d("PlusIcon"),h=d("MinusIcon");return r(),o("div",ve,[s("div",ge,u(e.life.remainingLife),1),s("button",{onClick:t[1]||(t[1]=t=>e.life.raise(1)),class:"button raise"},[s(c)]),s("button",{onClick:t[2]||(t[2]=t=>e.life.reduce(1)),class:"button reduce"},[s(h)])])}));fe.render=we,fe.__scopeId="data-v-ca6e6eca";var be=n({name:"App",components:{Board:P,Button:F,Library:ae,LifePointsCounter:fe},setup(){const t=T();!function(t){t.$subscribe(((e,t)=>{window.localStorage.setItem("player1Store",JSON.stringify({board:t.board.$state,life:t.life.$state}))}));try{const n=window.localStorage.getItem("player1Store");if(n){const o=JSON.parse(n);t.$patch({board:e(e({},o.board),{token:o.board.token.map((t=>new C(e(e({},t._options),{hasSummoningSickness:t._summoningSickness,isTapped:t._tapped}))))}),life:o.life})}}catch(n){console.error(n)}}(t);return{player1Store:t,handleAttackAll:()=>t.board.attackWithAll(),handleNextTurn:()=>t.nextTurn(),handleSummon:n=>{const o=new C(e({},n.tokenOptions));t.board.addToken(o)}}}});const _e=m("Reset"),ye=m("Attack with all"),Se=m("Next Turn");be.render=function(e,t,n,a,i,l){const c=d("LifePointsCounter"),u=d("Board"),p=d("Button"),k=d("Library");return r(),o(h,null,[s(c,{life:e.player1Store.life},null,8,["life"]),s(u,{board:e.player1Store.board},null,8,["board"]),s(p,{onClick:e.player1Store.reset},{default:v((()=>[_e])),_:1},8,["onClick"]),s(p,{onClick:e.handleAttackAll},{default:v((()=>[ye])),_:1},8,["onClick"]),s(p,{onClick:e.handleNextTurn},{default:v((()=>[Se])),_:1},8,["onClick"]),s(k,{onSummon:e.handleSummon},null,8,["onSummon"])],64)};const Ce=g(be);Ce.use(w()),Ce.mount("#app");
