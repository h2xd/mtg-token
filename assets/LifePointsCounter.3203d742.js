var e=Object.assign;import{o as n,c as t,r as o,d as l,m as a,n as r,q as s,a as u,s as c,e as i,g as p,l as d,v as y,x as m,k as f,u as v,b as w,M as h,t as _,F as b,i as k}from"./index.d7c36c47.js";function g(e){return`var(--mana-color-${e}-background)`}function x(e){return`var(--mana-color-${e}-text)`}const C={backgroundKey:"--mana-background",textKey:"--mana-text"};function M(n,t){const{backgroundKey:o,textKey:l}=e(e({},C),t);return{[o]:g(n),[l]:x(n)}}var j={button:"_button_jkxpw_2"};const I={};(I.__cssModules={}).$style=j,I.render=function(e,l){return n(),t("button",{class:e.$style.button},[o(e.$slots,"default")],2)};var $=l({render(){return this.displayNumber},props:{number:{type:Number,default:0},tickDuration:{type:Number,default:50},tickStrength:{type:Number,default:20}},setup(e){const n=a(0),t=a(e.number),o=()=>window.clearInterval(n.value);return r((()=>e.number),(()=>{o(),e.number!==t.value&&(n.value=window.setInterval((()=>{if(t.value!=e.number){let n=(e.number-t.value)/e.tickStrength;n=n>=0?Math.ceil(n):Math.floor(n),t.value=t.value+n}}),e.tickDuration))})),s((()=>o())),{displayNumber:t}}});const S={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-x"},D=u("line",{x1:"18",y1:"6",x2:"6",y2:"18"},null,-1),B=u("line",{x1:"6",y1:"6",x2:"18",y2:"18"},null,-1);var H=l({name:"App",components:{CloseIcon:function(e,o){return n(),t("svg",S,[D,B])}},setup(){const e=c();return r(e,(e=>{window.document.body.style.overflow=e.isOpen?"hidden":null})),{popupStore:e}}});const P={key:0,class:"popup"},O=f("Close ");H.render=function(e,l,a,r,s,c){const f=i("CloseIcon");return n(),t(m,{to:e.popupStore.portalTarget},[e.popupStore.isOpen?(n(),t("div",{key:0,class:"popup-underlay",onClick:l[1]||(l[1]=n=>e.popupStore.close())})):p("",!0),u(y,{name:"bounce"},{default:d((()=>[e.popupStore.isOpen?(n(),t("div",P,[u("button",{onClick:l[2]||(l[2]=n=>e.popupStore.close())},[O,u(f)]),u("div",null,[o(e.$slots,"default")])])):p("",!0)])),_:1})],8,["to"])};const L={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-plus"},N=u("line",{x1:"12",y1:"5",x2:"12",y2:"19"},null,-1),V=u("line",{x1:"5",y1:"12",x2:"19",y2:"12"},null,-1);const K={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-minus"},A=u("line",{x1:"5",y1:"12",x2:"19",y2:"12"},null,-1);var T=l({name:"LifePointsCounter",components:{AnimatedInteger:$,Button:I,PlusIcon:function(e,o){return n(),t("svg",L,[N,V])},MinusIcon:function(e,o){return n(),t("svg",K,[A])},Popup:H},props:{player:Object},setup(e){const n=v(),t=w((()=>{var n;return M(null==(n=e.player)?void 0:n.mana)})),o=w((()=>Object.values(h).map((n=>{var t;return{mana:n,selected:(null==(t=e.player)?void 0:t.mana)===n,styles:M(n)}})))),l=c(),r=a(l.generateId()),s=w((()=>l.selectedId===r.value)),u=a(0);return{styles:t,appStore:n,popupStore:l,popupId:r,isPopupSelected:s,manaCollection:o,handleLayoutChange:e=>{n.setLayout(e),l.close()},createMouseDownHandler:e=>{e(),u.value=window.setInterval(e,175)},clearMouseDownHandler:()=>{window.clearInterval(u.value)}}}});var q={container:"_container_1fhj9_2",manaButton:"_manaButton_1fhj9_16",selected:"_selected_1fhj9_27",counter:"_counter_1fhj9_31",commitValue:"_commitValue_1fhj9_35",button:"_button_1fhj9_43",raise:"_raise_1fhj9_75",reduce:"_reduce_1fhj9_83"};const F=f("Reset Game");(T.__cssModules={}).$style=q,T.render=function(e,o,l,a,r,s){const c=i("AnimatedInteger"),m=i("PlusIcon"),v=i("MinusIcon"),w=i("Button"),h=i("Popup");return n(),t(b,null,[u("div",{class:e.$style.container,style:e.styles},[u(y,{name:"bounce"},{default:d((()=>[e.player.life.hasCommitValue?(n(),t("div",{key:0,class:e.$style.commitValue},_(e.player.life.decoratedCommitValue),3)):p("",!0)])),_:1}),u("div",{class:e.$style.counter,onClick:o[1]||(o[1]=n=>e.popupStore.open(e.popupId))},[u(c,{number:e.player.life.remainingLife},null,8,["number"])],2),u("button",{onMousedown:o[2]||(o[2]=n=>e.createMouseDownHandler((()=>e.player.life.raise(1)))),onMouseup:o[3]||(o[3]=(...n)=>e.clearMouseDownHandler&&e.clearMouseDownHandler(...n)),class:[e.$style.button,e.$style.raise]},[u(m)],34),u("button",{onMousedown:o[4]||(o[4]=n=>e.createMouseDownHandler((()=>e.player.life.reduce(1)))),onMouseup:o[5]||(o[5]=(...n)=>e.clearMouseDownHandler&&e.clearMouseDownHandler(...n)),class:[e.$style.button,e.$style.reduce]},[u(v)],34)],6),e.isPopupSelected?(n(),t(h,{key:0},{default:d((()=>[(n(!0),t(b,null,k(e.manaCollection,(o=>(n(),t("button",{key:o.mana,class:[e.$style.manaButton,o.selected&&e.$style.selected],style:o.styles,onClick:n=>e.player.setManaType(o.mana)},null,14,["onClick"])))),128)),u("div",null,[u(w,{onClick:o[6]||(o[6]=n=>e.appStore.reset())},{default:d((()=>[F])),_:1})]),u("div",null,[(n(!0),t(b,null,k(e.appStore.layouts,(o=>(n(),t(w,{key:o.name,onClick:n=>e.handleLayoutChange(o)},{default:d((()=>[f(_(o.name),1)])),_:2},1032,["onClick"])))),128))])])),_:1})):p("",!0)],64)};export{I as _,T as a,M as m};
